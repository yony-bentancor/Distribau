<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Administrador | Componentes y Stock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
  <div class="container">
    <div class="secciones">

      <!-- NUEVO COMPONENTE -->
      <section class="seccion" id="nueva-componente">
        <h2>Nuevo Componente</h2>
        <div id="alerta"></div>
       <form id="form-componente">
  <input type="text" name="nombre" placeholder="Nombre del componente" required>
  <input type="text" name="articuloComercial" placeholder="ArtÃ­culo comercial (ej: CLM-101)">
  <input type="text" name="modelo" placeholder="Modelo (ej: Climax)">
  <input type="number" name="puntosInstalacion" step="0.01" placeholder="Puntaje instalaciÃ³n" required>
  <input type="number" name="puntosConexion" step="0.01" placeholder="Puntaje conexiÃ³n" required>
  <button type="submit">Guardar</button>
</form>

      </section>

      <!-- STOCK CENTRAL -->
      <section class="seccion" id="stock-central">
        <h2>Stock Bodega Central</h2>
        <table id="tabla-componentes">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Stock</th>
              <th>Acciones</th>
            </tr>
          </thead>
            <a href="/almacen" class="btn-verde">ðŸ“¦ INGRESO ALMACEN</a>
          <tbody></tbody>
        </table>
      </section>

      <!-- TRANSFERENCIAS -->
      <section class="seccion" id="transferir-stock">
        <h2>Transferir Stock</h2>
        <form id="form-transferencia-multiple">
          <label>Origen</label>
          <select id="origen" required></select>

          <label>Destino</label>
          <select id="destino" required></select>

          <div id="componentes-transferencia"></div>

          <button type="button" onclick="agregarLineaComponente()">âž• Agregar Componente</button>
          <textarea id="comentario" placeholder="Comentario (opcional)" rows="2"></textarea>
          <button type="submit">Transferir</button>
        </form>
      </section>
    </div>

    <!-- BODEGAS DE TÃ‰CNICOS -->
   <div id="bodega-tecnicos">
  <h2>Bodega de TÃ©cnicos</h2>

  <table class="bodega-horizontal">
    <thead>
      <tr>
        <th>TÃ©cnico</th>
        <% componentesUnicos.forEach(c => { %>
          <th><%= c.nombre %></th>
        <% }) %>
      </tr>
    </thead>
    <tbody>
      <% bodegas.forEach(bodega => { %>
        <tr>
          <td><%= bodega.usuario.username %></td>
          <% componentesUnicos.forEach(c => {
              const comp = bodega.componentes.find(item => item.componente._id.toString() === c._id.toString());
          %>
            <td><%= comp ? comp.cantidad : 0 %></td>
          <% }) %>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

  


    <a href="/movimientos" target="_blank" class="historial">ðŸ“– HISTORIAL DE MOVIMIENTOS</a>
  </div>

  <script src="/js/admin.js"></script>
</body>
</html>
